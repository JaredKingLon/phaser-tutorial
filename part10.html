function create ()
{
    // Background
    this.add.image(960, 540, 'sky').setScale(5);

    // Platforms group
    platforms = this.physics.add.staticGroup();

    // Ground stretched across the bottom
    platforms.create(960, 1060, 'ground').setScale(5).refreshBody();

    // Spread-out ledges (x, y positions)
    platforms.create(300, 900, 'ground');
    platforms.create(700, 750, 'ground');
    platforms.create(1100, 600, 'ground');
    platforms.create(1500, 450, 'ground');
    platforms.create(400, 300, 'ground');
    platforms.create(800, 200, 'ground');
    platforms.create(1300, 150, 'ground');

    // Player
    player = this.physics.add.sprite(100, 900, 'dude');
    player.setBounce(0.2);
    player.setCollideWorldBounds(true);

    // Animations
    this.anims.create({
        key: 'left',
        frames: this.anims.generateFrameNumbers('dude', { start: 0, end: 3 }),
        frameRate: 10,
        repeat: -1
    });
    this.anims.create({
        key: 'turn',
        frames: [ { key: 'dude', frame: 4 } ],
        frameRate: 20
    });
    this.anims.create({
        key: 'right',
        frames: this.anims.generateFrameNumbers('dude', { start: 5, end: 8 }),
        frameRate: 10,
        repeat: -1
    });

    // Input
    cursors = this.input.keyboard.createCursorKeys();

    // Stars
    stars = this.physics.add.group({
        key: 'star',
        repeat: 11,
        setXY: { x: 50, y: 0, stepX: 150 }
    });
    stars.children.iterate(child => {
        child.setBounceY(Phaser.Math.FloatBetween(0.4, 0.8));
    });

    bombs = this.physics.add.group();

    // Score
    scoreText = this.add.text(16, 16, 'Score: 0', { fontSize: '32px', fill: '#000' });

    // Collisions
    this.physics.add.collider(player, platforms);
    this.physics.add.collider(stars, platforms);
    this.physics.add.collider(bombs, platforms);

    this.physics.add.overlap(player, stars, collectStar, null, this);
    this.physics.add.collider(player, bombs, hitBomb, null, this);
}
